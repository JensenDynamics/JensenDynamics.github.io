
<html>
<head>
   <title>gEDA PCB Footprint Creation Utility</title>
   <META name="date" content="2008-12-14">
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
   <meta name="geo.country" content="US" />
   <meta name="dc.language" content="en" />
   <script language="JavaScript">

      function createBGA()
      {
         // read in all of the device parameters
         if (document.bgaform.units[0].checked)
            var mm = 0;
         else
            var mm = 1;

         var device_name = document.bgaform.device_name.value;
         var pad_diameter = document.bgaform.pad_diameter.value;
         var pitch = document.bgaform.pitch.value;
         var rows = document.bgaform.rows.value;
         var columns = document.bgaform.columns.value;
         var silkboxwidth = document.bgaform.silkboxwidth.value;
         var silkboxheight = document.bgaform.silkboxheight.value;
         var clearance = document.bgaform.clearance.value;
         var solder_mask_opening = document.bgaform.solder_mask_opening.value;

         // calculate variables in hundreths of mils
         pad_diameter    = parseInt( (mm==0) ? pad_diameter*100     : pad_diameter/0.000254 );
         silkboxwidth    = parseInt( (mm==0) ? silkboxwidth*100    : silkboxwidth/0.000254 );
         silkboxheight   = parseInt( (mm==0) ? silkboxheight*100   : silkboxheight/0.000254 );
         clearance      = parseInt( (mm==0) ? clearance*100       : clearance/0.000254 );
         solder_mask_opening     = parseInt( (mm==0) ? solder_mask_opening*100      : solder_mask_opening/0.000254 );

         var text_location_x = 0;
         var text_location_y = parseInt(0 - silkboxheight/2 - 2000);

         // CLEAR OUTPUT TEXTAREA
         document.getElementById("bga_output").value = "";

         // OUTPUT FOOTPRINT DEFINITION LINE
         document.getElementById("bga_output").value += 'Element["" "' + device_name + '" ';
         // Reference designator is blank
         document.getElementById("bga_output").value += '"" ';
         // name is the same as above
         document.getElementById("bga_output").value += '"' + device_name + '" ';
         // origin is always in the middle
         document.getElementById("bga_output").value += '0 0 ';
         // the text location is on top
         document.getElementById("bga_output").value += text_location_x + ' ' + text_location_y + ' ';
         // text direction is horizontal, scaled to 100
         document.getElementById("bga_output").value += '0 100 ""]' + '\n';

         // OUTPUT OPENING PARENTHESIS LINE
         document.getElementById("bga_output").value += "(\n";

         // # Pad[X1, Y1, X2, Y3, width, clearance, soldermask, "pin name", "pin number", flags]

         // OUTPUT PADS FROM LEFT TO RIGHT, TOP TO BOTTOM
         for (var i=1; i<=rows; i=i+1)
         {
            var y_location = pitch*((i-1) - (rows-1)/2)*1.00;
            y_location = parseInt( (mm==0) ? y_location*100 : y_location/0.000254 );

            switch (i)
            {
               case  1: var column_name = 'A'; break;
               case  2: var column_name = 'B'; break;
               case  3: var column_name = 'C'; break;
               case  4: var column_name = 'D'; break;
               case  5: var column_name = 'E'; break;
               case  6: var column_name = 'F'; break;
               case  7: var column_name = 'G'; break;
               case  8: var column_name = 'H'; break;
               case  9: var column_name = 'J'; break;
               case 10: var column_name = 'K'; break;
               case 11: var column_name = 'L'; break;
               case 12: var column_name = 'M'; break;
               case 13: var column_name = 'N'; break;
               case 14: var column_name = 'P'; break;
               case 15: var column_name = 'R'; break;
               case 16: var column_name = 'T'; break;
               case 17: var column_name = 'U'; break;
               case 18: var column_name = 'V'; break;
               case 19: var column_name = 'W'; break;
               case 20: var column_name = 'Y'; break;
               case 21: var column_name = 'AA'; break;
               case 22: var column_name = 'AB'; break;
               case 23: var column_name = 'AC'; break;
               case 24: var column_name = 'AD'; break;
               case 25: var column_name = 'AE'; break;
               case 26: var column_name = 'AF'; break;
               case 27: var column_name = 'AG'; break;
               case 28: var column_name = 'AH'; break;
               case 29: var column_name = 'AJ'; break;
               case 30: var column_name = 'AK'; break;
               case 31: var column_name = 'AL'; break;
               case 32: var column_name = 'AM'; break;
               case 33: var column_name = 'AN'; break;
               case 34: var column_name = 'AP'; break;
               case 35: var column_name = 'AR'; break;
               case 36: var column_name = 'AT'; break;
               case 37: var column_name = 'AU'; break;
               case 38: var column_name = 'AV'; break;
               case 39: var column_name = 'AW'; break;
               case 40: var column_name = 'AY'; break;
               case 41: var column_name = 'BA'; break;
               case 42: var column_name = 'BB'; break;
               case 43: var column_name = 'BC'; break;
               case 44: var column_name = 'BD'; break;
               case 45: var column_name = 'BE'; break;
               case 46: var column_name = 'BF'; break;
               case 47: var column_name = 'BG'; break;
               case 48: var column_name = 'BH'; break;
               case 49: var column_name = 'BJ'; break;
               case 50: var column_name = 'BK'; break;
               case 51: var column_name = 'BL'; break;
               case 52: var column_name = 'BM'; break;
               case 53: var column_name = 'BN'; break;
               case 54: var column_name = 'BP'; break;
               case 55: var column_name = 'BR'; break;
               case 56: var column_name = 'BT'; break;
               case 57: var column_name = 'BU'; break;
               case 58: var column_name = 'BV'; break;
               case 59: var column_name = 'BW'; break;
               case 60: var column_name = 'BY'; break;
               default: var column_name = 'unknown';
            }

            for (var j=1; j<=columns; j=j+1)
            {
               pin_name = column_name + j;
               var x_location = pitch*((columns-1)/2 - (j-1));
               x_location = parseInt( (mm==0) ? x_location*100 : x_location/0.000254 );

               document.getElementById("bga_output").value += "Pad[";
               document.getElementById("bga_output").value += x_location + ' ' + y_location + ' ';
               document.getElementById("bga_output").value += x_location + ' ' + y_location + ' ';
               document.getElementById("bga_output").value += pad_diameter + ' ' + clearance + " " + solder_mask_opening + ' "';
               // pin name and pin number
               document.getElementById("bga_output").value += pin_name + '" "' + pin_name + '" ';
               // flags
               document.getElementById("bga_output").value += "0x00000000]\n";
            }
         }

         // OUTPUT SILKSCREEN PACKAGE OUTLINE
         var xpos = parseInt(0 - silkboxwidth/2);
         var ypos = parseInt(0 + silkboxheight/2);
         document.getElementById("bga_output").value += "ElementLine[" + (0 - xpos) + " " + (0 - ypos) + " " + (0 - xpos) + " " + (0 + ypos) + " 1000]\n";
         document.getElementById("bga_output").value += "ElementLine[" + (0 - xpos) + " " + (0 + ypos) + " " + (0 + xpos) + " " + (0 + ypos) + " 1000]\n";
         document.getElementById("bga_output").value += "ElementLine[" + (0 + xpos) + " " + (0 + ypos) + " " + (0 + xpos) + " " + (0 - ypos) + " 1000]\n";
         document.getElementById("bga_output").value += "ElementLine[" + (0 + xpos) + " " + (0 - ypos) + " " + (0 - xpos) + " " + (0 - ypos) + " 1000]\n";
         // OUTPUT PIN 1 INDICATOR (DOT)
         document.getElementById("bga_output").value += "ElementArc[" + parseInt(0 - silkboxwidth/2 - 2000) + " " + parseInt(0 - silkboxheight/2 - 2000) + " 750 750 0 360 1500]\n";
         // OUTPUT CLOSING PARENTHESIS LINE
         document.getElementById("bga_output").value += ")\n";

      }

      function createQFP()
      {
         // read in all of the device parameters
         if (document.qfpform.units[0].checked)
            var mm = 0;
         else
            var mm = 1;

         var device_name = document.qfpform.device_name.value;
         var pinshigh = document.qfpform.pinshigh.value;
         var pins = document.qfpform.pins.value;
         var pitch = document.qfpform.pitch.value;
         var padlength = document.qfpform.padlength.value;
         var padwidth = document.qfpform.padwidth.value;
         var height = document.qfpform.height.value;
         var width = document.qfpform.width.value;

         var thermalpadwidth = document.qfpform.thermalpadwidth.value;
         var thermalpadheight = document.qfpform.thermalpadheight.value;
         var silkboxwidth = document.qfpform.silkboxwidth.value;
         var silkboxheight = document.qfpform.silkboxheight.value;
         var clearance = document.qfpform.clearance.value;
         var solder_mask_opening = document.qfpform.solder_mask_opening.value;

         var pinsleft = pinshigh*1;
         var pinsbottom = pins/2 - pinshigh*1;
         var pinsright = pinsleft*1;
         var pinstop = pinsbottom*1;

         // calculate variables in hundreths of mils
//       thermalpadwidth  = parseInt( (mm==0) ? thermalpadwidth*100  : thermalpadwidth/0.000254 );
//       thermalpadheight = parseInt( (mm==0) ? thermalpadheight*100 : thermalpadheight/0.000254 );
         silkboxwidth     = parseInt( (mm==0) ? silkboxwidth*100     : silkboxwidth/0.000254 );
         silkboxheight    = parseInt( (mm==0) ? silkboxheight*100    : silkboxheight/0.000254 );
         clearance       = parseInt( (mm==0) ? clearance*100       : clearance/0.000254 );
         solder_mask_opening      = parseInt( (mm==0) ? solder_mask_opening*100      : solder_mask_opening/0.000254 );
         var padwidth_cmils  = parseInt( (mm==0) ? padwidth*100  : padwidth/0.000254 );
         var padlength_cmils = parseInt( (mm==0) ? padlength*100 : thermalpadheight/0.000254 );

         var text_location_x = 0;
         var text_location_y = 0 - silkboxheight/2 - 2000;

         // CLEAR OUTPUT TEXTAREA
         document.getElementById("qfp_output").value = "";

         // OUTPUT FOOTPRINT DEFINITION LINE
         document.getElementById("qfp_output").value += 'Element["" "' + device_name + '" ';
         // Reference designator is blank
         document.getElementById("qfp_output").value += '"" ';
         // name is the same as above
         document.getElementById("qfp_output").value += '"' + device_name + '" ';
         // origin is always in the middle
         document.getElementById("qfp_output").value += '0 0 ';
         // the text location is on top
         document.getElementById("qfp_output").value += text_location_x + ' ' + text_location_y + ' ';
         // text direction is horizontal, scaled to 100
         document.getElementById("qfp_output").value += '0 100 ""]' + '\n';

         // OUTPUT OPENING PARENTHESIS LINE
         document.getElementById("qfp_output").value += "(\n";

         // # Pad[X1, Y1, X2, Y3, width, clearance, soldermask, "pin name", "pin number", flags]

         // OUTPUT PADS IN LEFT ROW
         for (var i=1; i<=pinsleft; i=i+1)
         {
            var start_x = 0 - width/2 - 1*padlength + padwidth/2;
            var end_x   = 0 - width/2 - padwidth/2;

            start_x = parseInt( (mm==0) ? start_x*100 : start_x/0.000254 );
            end_x = parseInt( (mm==0) ? end_x*100 : end_x/0.000254 );

            var start_y = pitch*((i-1) - (pinsleft-1)/2);
            start_y = parseInt( (mm==0) ? start_y*100 : start_y/0.000254 );

            var end_y = start_y;

            var pin_number = i;

            document.getElementById("qfp_output").value += "Pad[";
            document.getElementById("qfp_output").value += start_x + ' ' + start_y + ' ' + end_x + ' ' + end_y + ' ';
            document.getElementById("qfp_output").value += padwidth_cmils + ' ' + clearance + " " + solder_mask_opening + ' ';
            // pin name and pin number
            document.getElementById("qfp_output").value += '"' + pin_number + '" "' + pin_number + '" ';
            // flags
            document.getElementById("qfp_output").value += '"square"]\n';
         }
         // OUTPUT PADS IN BOTTOM ROW
         if (pinsbottom != 0)
         {
         for (var i=1; i<=pinsbottom; i=i+1)
         {
            var start_y = 0 + height/2 + padwidth/2;
            var end_y   = 0 + height/2 + 1*padlength - padwidth/2;

            start_y = parseInt( (mm==0) ? start_y*100 : start_y/0.000254 );
            end_y = parseInt( (mm==0) ? end_y*100 : end_y/0.000254 );

            var start_x = pitch*((i-1) - (pinsbottom-1)/2);
            start_x = parseInt( (mm==0) ? start_x*100 : start_x/0.000254 );

            var end_x = start_x;

            var pin_number = i + pinsleft*1;
            document.getElementById("qfp_output").value += "Pad[";
            document.getElementById("qfp_output").value += start_x + ' ' + start_y + ' ' + end_x + ' ' + end_y + ' ';
            document.getElementById("qfp_output").value += padwidth_cmils + ' ' + clearance + " " + solder_mask_opening + ' ';
            // pin name and pin number
            document.getElementById("qfp_output").value += '"' + pin_number + '" "' + pin_number + '" ';
            // flags
            document.getElementById("qfp_output").value += '"square,edge2"]\n';
         }
         }
         // OUTPUT PADS IN RIGHT ROW
         for (var i=1; i<=pinsright; i=i+1)
         {
            var start_x = 0 + width/2 + padwidth/2;
            var   end_x = 0 - padwidth/2 + width/2 + 1*padlength;

            start_x = parseInt( (mm==0) ? start_x*100 : start_x/0.000254 );
            end_x = parseInt( (mm==0) ? end_x*100 : end_x/0.000254 );

            var start_y = pitch*((pinsleft-1)/2 - (i-1));
            start_y = parseInt( (mm==0) ? start_y*100 : start_y/0.000254 );

            var end_y = start_y;

            var pin_number = i + pinsleft*1 + pinsbottom*1;
            document.getElementById("qfp_output").value += "Pad[";
            document.getElementById("qfp_output").value += start_x + ' ' + start_y + ' ' + end_x + ' ' + end_y + ' ';
            document.getElementById("qfp_output").value += padwidth_cmils + ' ' + clearance + " " + solder_mask_opening + ' ';
            // pin name and pin number
            document.getElementById("qfp_output").value += '"' + pin_number + '" "' + pin_number + '" ';
            // flags
            document.getElementById("qfp_output").value += '"square"]\n';
         }
         // OUTPUT PADS IN TOP ROW
         if (pinstop != 0)
         {
         for (var i=1; i<=pinstop; i=i+1)
         {
            var start_y = 0 - height/2 - padlength + padwidth/2;
            var end_y   = 0 - height/2 - padwidth/2;

            start_y = parseInt( (mm==0) ? start_y*100 : start_y/0.000254 );
            end_y = parseInt( (mm==0) ? end_y*100 : end_y/0.000254 );

            var start_x = pitch*((pinsbottom-1)/2 - (i-1));
            start_x = parseInt( (mm==0) ? start_x*100 : start_x/0.000254 );

            var end_x = start_x;

            var pin_number = i + pinsleft*1 + pinsbottom*1 + pinsright*1;
            document.getElementById("qfp_output").value += "Pad[";
            document.getElementById("qfp_output").value += start_x + ' ' + start_y + ' ' + end_x + ' ' + end_y + ' ';
            document.getElementById("qfp_output").value += padwidth_cmils + ' ' + clearance + " " + solder_mask_opening + ' ';
            // pin name and pin number
            document.getElementById("qfp_output").value += '"' + pin_number + '" "' + pin_number + '" ';
            // flags
            document.getElementById("qfp_output").value += '"square,edge2"]\n';
         }
         }

         // OUTPUT THERMAL PAD
         var thermal_pad_number = document.qfpform.pins + 1;
         if (document.qfpform.thermal_pad.checked == true)
         {
            var start_x = 0 - thermalpadwidth/2;
            var start_y = 0 + thermalpadheight/2;
            var end_x = 0 + thermalpadwidth/2;
            var end_y = 0 - thermalpadheight/2;

            if (thermalpadwidth <= thermalpadheight)
            { // pad taller than wide
               start_x = 0;
               end_x = start_x;
               start_y = 0 - (thermalpadwidth - thermalpadheight)/2;
               end_y   = -start_y;
               var thermal_pad_width = thermalpadwidth;
            }
            else
            { // pad wider than tall
               start_y = 0;
               end_y = 0;
               start_x = 0 - (thermalpadheight - thermalpadwidth)/2;
               end_x = -start_x;
               var thermal_pad_width = thermalpadheight;
            }

            start_x = parseInt( (mm==0) ? start_x*100 : start_x/0.000254 );
            end_x   = parseInt( (mm==0) ?   end_x*100 :   end_x/0.000254 );
            start_y = parseInt( (mm==0) ? start_y*100 : start_y/0.000254 );
            end_y   = parseInt( (mm==0) ?   end_y*100 :   end_y/0.000254 );

            thermal_pad_width = parseInt( (mm==0) ? thermal_pad_width*100 : thermal_pad_width/0.000254 );

            var pin_number = pinsleft*1 + pinsbottom*1 + pinsright*1 + pinstop*1 + 1;
            document.getElementById("qfp_output").value += "Pad[";
            document.getElementById("qfp_output").value += start_x + ' ' + start_y + ' ' + end_x + ' ' + end_y + ' ';
            document.getElementById("qfp_output").value += thermal_pad_width + ' ' + clearance + " " + solder_mask_opening + ' ';
            // pin name and pin number
            document.getElementById("qfp_output").value += '"' + pin_number + '" "' + pin_number + '" ';
            // flags
            document.getElementById("qfp_output").value += "0x00000100]\n";
         }

         // OUTPUT SILKSCREEN PACKAGE OUTLINE
         var xpos = parseInt(0 - silkboxwidth/2);
         var ypos = parseInt(0 + silkboxheight/2);
         document.getElementById("qfp_output").value += "ElementLine[" + (0 - xpos) + " " + (0 - ypos) + " " + (0 - xpos) + " " + (0 + ypos) + " 1000]\n";
         document.getElementById("qfp_output").value += "ElementLine[" + (0 - xpos) + " " + (0 + ypos) + " " + (0 + xpos) + " " + (0 + ypos) + " 1000]\n";
         document.getElementById("qfp_output").value += "ElementLine[" + (0 + xpos) + " " + (0 + ypos) + " " + (0 + xpos) + " " + (0 - ypos) + " 1000]\n";
         document.getElementById("qfp_output").value += "ElementLine[" + (0 + xpos) + " " + (0 - ypos) + " " + (0 - xpos) + " " + (0 - ypos) + " 1000]\n";
         // OUTPUT PIN 1 INDICATOR (DOT)
         document.getElementById("qfp_output").value += "ElementArc[" + parseInt(0 - silkboxwidth/2 - 2000) + " " + parseInt(0 - silkboxheight/2 - 2000) + " 750 750 0 360 1500]\n";
         // OUTPUT CLOSING PARENTHESIS LINE
         document.getElementById("qfp_output").value += ")\n";

      }

   </script>
</head>
<body>
<h1>gEDA PCB Footprint Creator Utility</h1>
<p>This utility automatically creates the contents of common types of footprint files
for the gEDA PCB layout tool.  Simply enter the correct values in each field, press
"Create Footprint", and then copy the contents of the output text window into
a file with the name "partname.fp".  If the part has special features, it
may be necessary to manually modify the file.</p>
<hr>
<h1>BGA FOOTPRINTS</h1>
<p>Notes: The reference mark is in the center of the device.</p>
<img src="bga.gif">
<form name="bgaform">
<input type="radio" name="units" value="mils">mils
<input type="radio" name="units" value="mm" CHECKED>mm<br />
<input type="text" name="device_name" value="bga" />Device Name<br />
<input type="text" name="pad_diameter" value="0.50" />Pad Diameter<br />
<input type="text" name="pitch" value="1.00" />pitch<br />
<input type="text" name="rows" value="16" />rows<br />
<input type="text" name="columns" value="16" />columns<br />
<input type="text" name="silkboxwidth" value="17.5" />silkboxwidth<br />
<input type="text" name="silkboxheight" value="17.5" />silkboxheight<br />
<input type="text" name="clearance" value="0.05" />Pad Clearance<br />
<input type="text" name="solder_mask_opening" value="0.05" />Solder Mask Opening<br />
<input type="submit" value="Create Footprint" onClick="createBGA(); return false;" /><br />
</form>
<textarea rows="5" cols="120" id="bga_output"></textarea>
<hr>
<h1>QFP/QFN/SO/CHIP FOOTPRINTS</h1>
<p>Notes:</p>
<p>The reference mark is in the center of the device.</p>
<p>A SO type device is created when the "pins" values is twice the "pinshigh" value.  Parameter "height" is not used.</p>
<p>A two leaded SMT chip pattern is created when "pins" is two and "pinshigh" is one.  Parameters "pitch" and "height" are not used.</p>
<img src="qfp.gif">
<form name="qfpform">
<input type="radio" name="units" value="mils" CHECKED>mils
<input type="radio" name="units" value="mm">mm<br />
<input type="text" name="device_name" value="qfp" />Device Name<br />
<input type="text" name="pinshigh" value="36" />pinshigh (must be an even integer)<br />
<input type="text" name="pins" value="144" />pins<br />
<input type="text" name="pitch" value="19.68530" />pitch<br />
<input type="text" name="padlength" value="50" />padlength<br />
<input type="text" name="padwidth" value="11.81" />padwidth<br />
<input type="text" name="height" value="800" />height<br />
<input type="text" name="width" value="800" />width<br />
<input type="checkbox" name="thermal_pad" value="thermal">Thermal Pad
<input type="text" name="thermalpadwidth" value="150" />thermalpadwidth
<input type="text" name="thermalpadheight" value="200" />thermalpadheight<br />
<input type="text" name="silkboxwidth" value="1100" />silkboxwidth<br />
<input type="text" name="silkboxheight" value="1100" />silkboxheight<br />
<input type="text" name="clearance" value="3.0" />Pad Clearance<br />
<input type="text" name="solder_mask_opening" value="1.402" />Solder Mask Opening<br />
<input type="submit" value="Create Footprint" onClick="createQFP(); return false;" /><br />
</form>
<textarea rows="5" cols="120" id="qfp_output"></textarea>
<hr>
<h1>THRU-HOLE COMPONENTS</h1>
<p>Notes: Pin 1 will be square. The reference mark is in the center of the device.</p>
<img src="thruhole.gif">
<form name="tholeform">
<input type="radio" name="units" value="mils" CHECKED>mils
<input type="radio" name="units" value="mm">mm<br />
<input type="text" name="qfp_ball_diameter" value="2" />Rows<br />
<input type="text" name="qfp_ball_diameter" value="5" />Columns<br />
<input type="text" name="qfp_ball_diameter" value="0.1" />Spacing<br />
<input type="text" name="qfp_ball_spacing" value=".07" />Pad diameter<br />
<input type="text" name="qfp_ball_spacing" value=".038" />Hole size<br />
<input type="text" name="qfp_clearance" value="15" />Solder Mask Swell<br />
<input type="text" name="qfp_solder_mask_opening" value="15" />Solder Paste Swell<br />
<input type="text" name="body_dim_x" value="15" />X Body Dimension for silkscreen<br />
<input type="text" name="body_dim_y" value="15" />Y Body Dimension for silkscreen<br />
<input type="submit" value="Create Footprint" onClick="createTHOLE(); return false;" /><br />
</form>
<textarea rows="5" cols="80" id="thole_output"></textarea>
<hr>
<h1>TWO ROW HEADER</h1>
<p>Notes: Pin 1 will be square. The reference mark is in the center of the device.</p>
<img src="header_2row.gif">
<form name="headerform">
<input type="radio" name="units" value="mils" CHECKED>mils
<input type="radio" name="units" value="mm">mm<br />
<input type="text" name="ball_diameter" value="2" />Rows<br />
<input type="text" name="ball_diameter" value="5" />Columns<br />
<input type="text" name="ball_diameter" value="0.1" />Spacing<br />
<input type="text" name="ball_spacing" value=".07" />Pad diameter<br />
<input type="text" name="ball_spacing" value=".038" />Hole size<br />
<input type="text" name="clearance" value="15" />Solder Mask Swell<br />
<input type="text" name="solder_mask_opening" value="15" />Solder Paste Swell<br />
<input type="text" name="body_dim_x" value="15" />X Body Dimension for silkscreen<br />
<input type="text" name="body_dim_y" value="15" />Y Body Dimension for silkscreen<br />
<input type="submit" value="Create Footprint" onClick="createHEADER(); return false;" /><br />
</form>
<textarea rows="5" cols="80" id="header_output"></textarea>

</body>
</html>
